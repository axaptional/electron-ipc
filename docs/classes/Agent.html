<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>@axaptional/electron-ipc documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	      <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/readthedocs.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">@axaptional/electron-ipc documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content class">
                   <div class="content-data">











<ol class="breadcrumb">
  <li>Classes</li>
  <li>Agent</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/agent.ts</code>
        </p>

            <p class="comment">
                <h3>Description</h3>
            </p>
            <p class="comment">
                <p>Represents an IPC communicator through which messages can be posted and received.</p>

            </p>




            <section>
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#on">on</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#on$">on$</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#once">once</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#once">once</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#once">once</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#once$">once$</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#onceListener">onceListener</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#oncePromise">oncePromise</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#post">post</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#removeAllListeners">removeAllListeners</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#removeAllListeners">removeAllListeners</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#removeAllListeners">removeAllListeners</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                    <span class="modifier">Abstract</span>
                                <a href="#respond">respond</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                    <span class="modifier">Abstract</span>
                                <a href="#send">send</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                    <span class="modifier">Static</span>
                                <a href="#transformObservableArgs">transformObservableArgs</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>

            <section>
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                                <span class="modifier">Protected</span>
                        <code>constructor(ipcService: T)</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="40" class="link-to-prism">src/agent.ts:40</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Initializes a new Agent for the given Electron IPC service.</p>
</div>
                            <div>
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                                    <td>Description</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>ipcService</td>
                                                  
                                                        <td>
                                                                    <code>T</code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                        <td>
                                                                <code><p>Either the ipcMain or the ipcRenderer service from Electron</p>
</code>
                                                        </td>
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>


            <section>
    
        <h3 id="methods">
            Methods
        </h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="on"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Public</span>
                            on
                            </b>
                            <a href="#on"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                            <span class="modifier-icon icon ion-ios-reset"></span>
                        <code>on(channel: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, listener: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank">Function</a>, options: <a href="../interfaces/ListenerOptions.html">ListenerOptions</a>)</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="90" class="link-to-prism">src/agent.ts:90</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Listens for messages on the given channel and calls the given listener when a message is received.
To send a response, simply have the listener function return a value or a Promise.
To stop listening, just call cancel() on the return value of this method.</p>
</div>

                            <div class="io-description">
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                                    <td>Description</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>channel</td>
                                                        <td>
                                                                    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                        <td>
                                                                <p>The channel to listen to</p>

                                                        </td>
                                                </tr>
                                                <tr>
                                                        <td>listener</td>
                                                        <td>
                                                                    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" >Function</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                        <td>
                                                                <p>The listener to call for each received message</p>

                                                        </td>
                                                </tr>
                                                <tr>
                                                        <td>options</td>
                                                        <td>
                                                                    <code><a href="../interfaces/ListenerOptions.html" target="_self" >ListenerOptions</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                        <td>
                                                                <p>Options specifying how to treat the listener function</p>

                                                        </td>
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code><a href="../classes/Canceler.html" target="_self" >Canceler</a></code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="on$"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Public</span>
                            on$
                            </b>
                            <a href="#on$"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                            <span class="modifier-icon icon ion-ios-reset"></span>
                        <code>on$(channel: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="116" class="link-to-prism">src/agent.ts:116</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Listens for messages on the given channel and emits them when received.
Responses using Observables are currently not supported, use on() instead if you need to respond.</p>
</div>

                            <div class="io-description">
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                                    <td>Description</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>channel</td>
                                                        <td>
                                                                    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                        <td>
                                                                <p>The channel to listen to</p>

                                                        </td>
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code>Observable&lt;any&gt;</code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="once"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Public</span>
                            once
                            </b>
                            <a href="#once"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                            <span class="modifier-icon icon ion-ios-reset"></span>
                        <code>once(channel: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="135" class="link-to-prism">src/agent.ts:135</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Listens for a message on the given channel. The Promise resolves once a message was received.
Canceling is only possible through the use of an additional library like Bluebird, not with native Promises.
Responses using Promises are currently not supported. If you need to respond, use a listener instead.</p>
</div>

                            <div class="io-description">
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                                    <td>Description</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>channel</td>
                                                        <td>
                                                                    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                        <td>
                                                                <p>The channel to listen to</p>

                                                        </td>
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code>Promise&lt;any&gt;</code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="once"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Public</span>
                            once
                            </b>
                            <a href="#once"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                            <span class="modifier-icon icon ion-ios-reset"></span>
                        <code>once(channel: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, listener: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank">Function</a>, options?: <a href="../interfaces/ListenerOptions.html">ListenerOptions</a>)</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="144" class="link-to-prism">src/agent.ts:144</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Listens for a message on the given channel and calls the given listener when it is received.
To send a response, simply have the listener function return a value or a Promise.
To stop listening, just call cancel() on the return value of this method.</p>
</div>

                            <div class="io-description">
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                                    <td>Description</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>channel</td>
                                                        <td>
                                                                    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                        <td>
                                                                <p>The channel to listen to</p>

                                                        </td>
                                                </tr>
                                                <tr>
                                                        <td>listener</td>
                                                        <td>
                                                                    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" >Function</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                        <td>
                                                                <p>The listener to call once the message was received</p>

                                                        </td>
                                                </tr>
                                                <tr>
                                                        <td>options</td>
                                                        <td>
                                                                    <code><a href="../interfaces/ListenerOptions.html" target="_self" >ListenerOptions</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            Yes
                                                    </td>
                                                    

                                                        <td>
                                                                <p>Options specifying how to treat the listener function</p>

                                                        </td>
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code><a href="../classes/Canceler.html" target="_self" >Canceler</a></code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="once"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Public</span>
                            once
                            </b>
                            <a href="#once"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                            <span class="modifier-icon icon ion-ios-reset"></span>
                        <code>once(channel: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, listener?: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank">Function</a>, options?: <a href="../interfaces/ListenerOptions.html">ListenerOptions</a>)</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="156" class="link-to-prism">src/agent.ts:156</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Listens for a message on the given channel and calls the given listener when it is received.
If no listener is specified, this method returns a Promise that resolves once the message is received instead.
To send a response, simply have the listener function return a value or a Promise.
To stop listening, just call cancel() on the return value of this method.
Canceling a Promise is only possible through the use of an additional library like Bluebird, not natively.
Responses using Promises are currently not supported. If you need to respond, use a listener instead.</p>
</div>

                            <div class="io-description">
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                                    <td>Description</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>channel</td>
                                                        <td>
                                                                    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                        <td>
                                                                <p>The channel to listen to</p>

                                                        </td>
                                                </tr>
                                                <tr>
                                                        <td>listener</td>
                                                        <td>
                                                                    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" >Function</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            Yes
                                                    </td>
                                                    

                                                        <td>
                                                                <p>The listener to call once the message was received (or nothing to use Promises instead)</p>

                                                        </td>
                                                </tr>
                                                <tr>
                                                        <td>options</td>
                                                        <td>
                                                                    <code><a href="../interfaces/ListenerOptions.html" target="_self" >ListenerOptions</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            Yes
                                                    </td>
                                                    

                                                        <td>
                                                                <p>Options specifying how to treat the listener function (ignored when using Promises)</p>

                                                        </td>
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="once$"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Public</span>
                            once$
                            </b>
                            <a href="#once$"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                            <span class="modifier-icon icon ion-ios-reset"></span>
                        <code>once$(channel: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="225" class="link-to-prism">src/agent.ts:225</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Listens for a message on the given channel, emits it when received and completes afterwards.
Responses using Observables are currently not supported, use once() instead if you need to respond.</p>
</div>

                            <div class="io-description">
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                                    <td>Description</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>channel</td>
                                                        <td>
                                                                    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                        <td>
                                                                <p>The channel to listen to</p>

                                                        </td>
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code>Observable&lt;any&gt;</code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="onceListener"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            onceListener
                            </b>
                            <a href="#onceListener"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                            <span class="modifier-icon icon ion-ios-reset"></span>
                        <code>onceListener(comChannels: <a href="../interfaces/CommunicationChannels.html">CommunicationChannels</a>, listener: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank">Function</a>, options?: <a href="../interfaces/ListenerOptions.html">ListenerOptions</a>)</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="187" class="link-to-prism">src/agent.ts:187</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Listens for a message and calls the given listener when it is received.</p>
</div>

                            <div class="io-description">
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                                    <td>Description</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>comChannels</td>
                                                        <td>
                                                                    <code><a href="../interfaces/CommunicationChannels.html" target="_self" >CommunicationChannels</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                        <td>
                                                                <p>The communication channels to use for sending and receiving messages</p>

                                                        </td>
                                                </tr>
                                                <tr>
                                                        <td>listener</td>
                                                        <td>
                                                                    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" >Function</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                        <td>
                                                                <p>The listener to call once the message was received</p>

                                                        </td>
                                                </tr>
                                                <tr>
                                                        <td>options</td>
                                                        <td>
                                                                    <code><a href="../interfaces/ListenerOptions.html" target="_self" >ListenerOptions</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            Yes
                                                    </td>
                                                    

                                                        <td>
                                                                <p>Options specifying how to treat the listener function</p>

                                                        </td>
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code><a href="../classes/Canceler.html" target="_self" >Canceler</a></code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="oncePromise"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            oncePromise
                            </b>
                            <a href="#oncePromise"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                            <span class="modifier-icon icon ion-ios-reset"></span>
                        <code>oncePromise(comChannels: <a href="../interfaces/CommunicationChannels.html">CommunicationChannels</a>)</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="169" class="link-to-prism">src/agent.ts:169</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Listens for a message. The Promise resolves once a message was received.</p>
</div>

                            <div class="io-description">
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                                    <td>Description</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>comChannels</td>
                                                        <td>
                                                                    <code><a href="../interfaces/CommunicationChannels.html" target="_self" >CommunicationChannels</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                        <td>
                                                                <p>The communication channels to use for sending and receiving messages</p>

                                                        </td>
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code>Promise&lt;any&gt;</code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="post"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Public</span>
                            post
                            </b>
                            <a href="#post"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                            <span class="modifier-icon icon ion-ios-reset"></span>
                        <code>post(channel: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, ...data: any[])</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="70" class="link-to-prism">src/agent.ts:70</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Posts a message to the given channel.
The Promise resolves either when a response is received or when the listening endpoint terminates.</p>
</div>

                            <div class="io-description">
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                                    <td>Description</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>channel</td>
                                                        <td>
                                                                    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                        <td>
                                                                <p>The channel to post to</p>

                                                        </td>
                                                </tr>
                                                <tr>
                                                        <td>data</td>
                                                        <td>
                                                                    <code>any[]</code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                        <td>
                                                                <p>The message to post</p>

                                                        </td>
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code>Promise&lt;any&gt;</code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="removeAllListeners"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Public</span>
                            removeAllListeners
                            </b>
                            <a href="#removeAllListeners"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                            <span class="modifier-icon icon ion-ios-reset"></span>
                        <code>removeAllListeners()</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="243" class="link-to-prism">src/agent.ts:243</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Unsubscribes all listeners from all channels.</p>
</div>

                            <div class="io-description">
                                <b>Returns : </b>    <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="removeAllListeners"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Public</span>
                            removeAllListeners
                            </b>
                            <a href="#removeAllListeners"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                            <span class="modifier-icon icon ion-ios-reset"></span>
                        <code>removeAllListeners(channel: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="248" class="link-to-prism">src/agent.ts:248</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Unsubscribes all listeners from the given channel.</p>
</div>

                            <div class="io-description">
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                                    <td>Description</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>channel</td>
                                                        <td>
                                                                    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                        <td>
                                                                <p>The channel to unsubscribe from</p>

                                                        </td>
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="removeAllListeners"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Public</span>
                            removeAllListeners
                            </b>
                            <a href="#removeAllListeners"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                            <span class="modifier-icon icon ion-ios-reset"></span>
                        <code>removeAllListeners(channel?: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="253" class="link-to-prism">src/agent.ts:253</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Unsubscribes all listeners from the given channel. Omit the channel to unsubscribe from all channels.</p>
</div>

                            <div class="io-description">
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                                    <td>Description</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>channel</td>
                                                        <td>
                                                                    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            Yes
                                                    </td>
                                                    

                                                        <td>
                                                                <p>The channel to unsubscribe from (or nothing)</p>

                                                        </td>
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="respond"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Protected</span>
                                <span class="modifier">Abstract</span>
                            respond
                            </b>
                            <a href="#respond"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                            <span class="modifier-icon icon ion-ios-reset"></span>
                        <code>respond(event: <a href="../undefineds/IpcEvent.html">IpcEvent</a>, responseChannel: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, ...data: any[])</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="60" class="link-to-prism">src/agent.ts:60</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Responds to a given event from the other process.</p>
</div>

                            <div class="io-description">
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                                    <td>Description</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>event</td>
                                                        <td>
                                                                    <code><a href="../miscellaneous/typealiases.html#IpcEvent" target="_self" >IpcEvent</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                        <td>
                                                                <p>The event to respond to</p>

                                                        </td>
                                                </tr>
                                                <tr>
                                                        <td>responseChannel</td>
                                                        <td>
                                                                    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                        <td>
                                                                <p>The channel to use for sending the response</p>

                                                        </td>
                                                </tr>
                                                <tr>
                                                        <td>data</td>
                                                        <td>
                                                                    <code>any[]</code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                        <td>
                                                                <p>The response data</p>

                                                        </td>
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="send"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Protected</span>
                                <span class="modifier">Abstract</span>
                            send
                            </b>
                            <a href="#send"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                            <span class="modifier-icon icon ion-ios-reset"></span>
                        <code>send(requestChannel: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, ...data: any[])</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="52" class="link-to-prism">src/agent.ts:52</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Sends a message to the other service.</p>
</div>

                            <div class="io-description">
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                                    <td>Description</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>requestChannel</td>
                                                        <td>
                                                                    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                        <td>
                                                                <p>The channel to use for sending the request</p>

                                                        </td>
                                                </tr>
                                                <tr>
                                                        <td>data</td>
                                                        <td>
                                                                    <code>any[]</code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                        <td>
                                                                <p>The request data</p>

                                                        </td>
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="transformObservableArgs"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Protected</span>
                                <span class="modifier">Static</span>
                            transformObservableArgs
                            </b>
                            <a href="#transformObservableArgs"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                            <span class="modifier-icon icon ion-ios-reset"></span>
                        <code>transformObservableArgs(args: any[])</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="215" class="link-to-prism">src/agent.ts:215</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Transform data to fit into a single argument.
Arrays with length 0 will yield undefined.
Arrays with length 1 will yield the object at index 0.
Arrays with length 2 or above will yield the input array.</p>
</div>

                            <div class="io-description">
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                                    <td>Description</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>args</td>
                                                        <td>
                                                                    <code>any[]</code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                        <td>
                                                                <p>The arguments to transform</p>

                                                        </td>
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code>any | []</code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>






    </div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { Observable, Subscriber } from &#x27;rxjs&#x27;;
import { Channels, CommunicationChannels } from &#x27;./channels&#x27;;
import { IpcEvent, IpcService } from &#x27;./aliases&#x27;;
import Promise from &#x27;any-promise&#x27;;

/**
 * Represents a helper to unsubscribe a listener function from a channel.
 */
export class Canceler {
  /**
   * Initializes a new Canceler.
   * @param ipcService The IPC service to use for unsubscribing
   * @param channel The channel to unsubscribe from
   * @param handler The listener to unsubscribe
   */
  constructor(private ipcService: IpcService, public channel: string, private handler: Function) {}

  /**
   * Unsubscribes the listener, meaning it will no longer be called when a message is received.
   */
  public cancel(): void {
    this.ipcService.removeListener(this.channel, this.handler);
  }
}

/**
 * Represents a set of options for handling listener arguments and return values.
 */
export interface ListenerOptions {
  /**
   * Whether the listener should be called with spread arguments (true) or an arguments array (false, default).
   */
  spread: boolean;
}

// TODO: Replies
/**
 * Represents an IPC communicator through which messages can be posted and received.
 */
export abstract class Agent&lt;T extends IpcService&gt; {
  /**
   * Initializes a new Agent for the given Electron IPC service.
   * @param ipcService Either the ipcMain or the ipcRenderer service from Electron
   */
  protected constructor(protected ipcService: T) {}

  /**
   * Sends a message to the other service.
   * @param requestChannel The channel to use for sending the request
   * @param data The request data
   */
  protected abstract send(requestChannel: string, ...data: any[]): void;

  /**
   * Responds to a given event from the other process.
   * @param event The event to respond to
   * @param responseChannel The channel to use for sending the response
   * @param data The response data
   */
  protected abstract respond(event: IpcEvent, responseChannel: string, ...data: any[]): void;

  // TODO: Mention at post$() that the message will only be sent ONCE the Observable is subscribed.
  // TODO: The Promise should be rejected if an uncaught error occurred at the listening endpoint.
  /**
   * Posts a message to the given channel.
   * The Promise resolves either when a response is received or when the listening endpoint terminates.
   * @param channel The channel to post to
   * @param data The message to post
   */
  public post(channel: string, ...data: any[]): Promise&lt;any&gt; {
    const { requestChannel, responseChannel } &#x3D; Channels.getCommunicationChannels(channel);
    const response &#x3D; new Promise((resolve, reject) &#x3D;&gt; {
      const handler &#x3D; (event: IpcEvent, ...args: any[]) &#x3D;&gt; {
        resolve(args);
      };
      this.ipcService.once(responseChannel, handler);
    });
    this.send(requestChannel, ...data);
    return response;
  }

  /**
   * Listens for messages on the given channel and calls the given listener when a message is received.
   * To send a response, simply have the listener function return a value or a Promise.
   * To stop listening, just call cancel() on the return value of this method.
   * @param channel The channel to listen to
   * @param listener The listener to call for each received message
   * @param options Options specifying how to treat the listener function
   */
  public on(channel: string, listener: Function, options: ListenerOptions): Canceler {
    const { requestChannel, responseChannel } &#x3D; Channels.getCommunicationChannels(channel);
    const params &#x3D; Object.assign(
      {
        spread: false,
      },
      options,
    );
    const handler &#x3D; (event: IpcEvent, ...args: any[]) &#x3D;&gt; {
      const respond &#x3D; (...data: any[]) &#x3D;&gt; this.respond(event, responseChannel, ...data);
      const response: any &#x3D; params.spread ? listener(...args) : listener(args);
      if (response instanceof Promise) {
        response.then(respond);
      } else {
        respond(response);
      }
    };
    this.ipcService.on(requestChannel, handler);
    return new Canceler(this.ipcService, requestChannel, handler);
  }

  /**
   * Listens for messages on the given channel and emits them when received.
   * Responses using Observables are currently not supported, use on() instead if you need to respond.
   * @param channel The channel to listen to
   */
  public on$(channel: string): Observable&lt;any&gt; {
    const { requestChannel, responseChannel } &#x3D; Channels.getCommunicationChannels(channel);
    return new Observable((subscriber: Subscriber&lt;any&gt;) &#x3D;&gt; {
      const listener &#x3D; (event: IpcEvent, ...args: any[]) &#x3D;&gt; {
        subscriber.next(Agent.transformObservableArgs(args));
        const response: any &#x3D; undefined;
        this.respond(event, responseChannel, response);
      };
      this.ipcService.on(requestChannel, listener);
      return () &#x3D;&gt; this.ipcService.removeListener(requestChannel, listener);
    });
  }

  /**
   * Listens for a message on the given channel. The Promise resolves once a message was received.
   * Canceling is only possible through the use of an additional library like Bluebird, not with native Promises.
   * Responses using Promises are currently not supported. If you need to respond, use a listener instead.
   * @param channel The channel to listen to
   */
  public once(channel: string): Promise&lt;any&gt;;
  /**
   * Listens for a message on the given channel and calls the given listener when it is received.
   * To send a response, simply have the listener function return a value or a Promise.
   * To stop listening, just call cancel() on the return value of this method.
   * @param channel The channel to listen to
   * @param listener The listener to call once the message was received
   * @param options Options specifying how to treat the listener function
   */
  public once(channel: string, listener: Function, options?: ListenerOptions): Canceler;
  /**
   * Listens for a message on the given channel and calls the given listener when it is received.
   * If no listener is specified, this method returns a Promise that resolves once the message is received instead.
   * To send a response, simply have the listener function return a value or a Promise.
   * To stop listening, just call cancel() on the return value of this method.
   * Canceling a Promise is only possible through the use of an additional library like Bluebird, not natively.
   * Responses using Promises are currently not supported. If you need to respond, use a listener instead.
   * @param channel The channel to listen to
   * @param listener The listener to call once the message was received (or nothing to use Promises instead)
   * @param options Options specifying how to treat the listener function (ignored when using Promises)
   */
  public once(channel: string, listener?: Function, options?: ListenerOptions) {
    const comChannels &#x3D; Channels.getCommunicationChannels(channel);
    if (typeof listener &#x3D;&#x3D;&#x3D; &#x27;undefined&#x27;) {
      return this.oncePromise(comChannels);
    } else {
      return this.onceListener(comChannels, listener, options);
    }
  }

  /**
   * Listens for a message. The Promise resolves once a message was received.
   * @param comChannels The communication channels to use for sending and receiving messages
   */
  private oncePromise(comChannels: CommunicationChannels): Promise&lt;any&gt; {
    const { requestChannel, responseChannel } &#x3D; comChannels;
    return new Promise((resolve, reject) &#x3D;&gt; {
      const handler &#x3D; (event: IpcEvent, ...args: any[]) &#x3D;&gt; {
        resolve(args);
        const response: any &#x3D; undefined;
        this.respond(event, responseChannel, response);
      };
      this.ipcService.once(requestChannel, handler);
    });
  }

  /**
   * Listens for a message and calls the given listener when it is received.
   * @param comChannels The communication channels to use for sending and receiving messages
   * @param listener The listener to call once the message was received
   * @param options Options specifying how to treat the listener function
   */
  private onceListener(comChannels: CommunicationChannels, listener: Function, options?: ListenerOptions): Canceler {
    const { requestChannel, responseChannel } &#x3D; comChannels;
    const params &#x3D; Object.assign(
      {
        spread: false,
      },
      options,
    );
    const handler &#x3D; (event: IpcEvent, ...args: any[]) &#x3D;&gt; {
      const respond &#x3D; (...data: any[]) &#x3D;&gt; this.respond(event, responseChannel, ...data);
      const response: any &#x3D; params.spread ? listener(...args) : listener(args);
      if (response instanceof Promise) {
        response.then(respond);
      } else {
        respond(response);
      }
    };
    this.ipcService.once(requestChannel, handler);
    return new Canceler(this.ipcService, requestChannel, handler);
  }

  /**
   * Transform data to fit into a single argument.
   * Arrays with length 0 will yield undefined.
   * Arrays with length 1 will yield the object at index 0.
   * Arrays with length 2 or above will yield the input array.
   * @param args The arguments to transform
   */
  protected static transformObservableArgs(args: any[]): any | any[] {
    const type &#x3D; Math.min(args.length, 2);
    return type &lt; 2 ? args[0] : args;
  }

  /**
   * Listens for a message on the given channel, emits it when received and completes afterwards.
   * Responses using Observables are currently not supported, use once() instead if you need to respond.
   * @param channel The channel to listen to
   */
  public once$(channel: string): Observable&lt;any&gt; {
    const { requestChannel, responseChannel } &#x3D; Channels.getCommunicationChannels(channel);
    return new Observable(subscriber &#x3D;&gt; {
      const listener &#x3D; (event: IpcEvent, ...args: any[]) &#x3D;&gt; {
        subscriber.next(Agent.transformObservableArgs(args));
        subscriber.complete();
        const response: any &#x3D; undefined;
        this.respond(event, responseChannel, response);
      };
      this.ipcService.once(requestChannel, listener);
      return () &#x3D;&gt; this.ipcService.removeListener(requestChannel, listener);
    });
  }

  // TODO: Request Promises and Observables should be rejected when removeAllListeners() is called.
  /**
   * Unsubscribes all listeners from all channels.
   */
  public removeAllListeners(): void;
  /**
   * Unsubscribes all listeners from the given channel.
   * @param channel The channel to unsubscribe from
   */
  public removeAllListeners(channel: string): void;
  /**
   * Unsubscribes all listeners from the given channel. Omit the channel to unsubscribe from all channels.
   * @param channel The channel to unsubscribe from (or nothing)
   */
  public removeAllListeners(channel?: string): void {
    const channels &#x3D; [];
    if (typeof channel !&#x3D;&#x3D; &#x27;undefined&#x27;) {
      channels.push(Channels.getRequestChannel(channel));
    } else {
      channels.push(...this.ipcService.eventNames().filter(Channels.isRequestChannel));
    }
    for (let channel of channels) {
      this.ipcService.removeAllListeners(channel);
    }
  }
}
</code></pre>
    </div>
</div>







                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> result-matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'class';
            var COMPODOC_CURRENT_PAGE_URL = 'Agent.html';
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>
       <!-- Required to polyfill modern browsers as code is ES5 for IE... -->
       <script src="../js/libs/custom-elements-es5-adapter.js" charset="utf-8" defer></script>
       <script src="../js/menu-wc.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
